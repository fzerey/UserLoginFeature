{"ast":null,"code":"import { handleError } from 'vue';\nimport { authHeader } from '../_helpers';\nexport const userService = {\n  login,\n  logout,\n  register,\n  verify,\n  retrievePassword,\n  getAll,\n  getById,\n  update,\n  delete: _delete\n};\n\nfunction login(username, password) {\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      username,\n      password\n    })\n  };\n  return fetch(`/api/1.0/auth`, requestOptions).then(handleResponse).then(responseData => {\n    // store user details and jwt token in local storage to keep user logged in between page refreshes\n    localStorage.setItem('user', JSON.stringify(responseData.user));\n    return responseData;\n  });\n}\n\nfunction logout() {\n  // remove user from local storage to log user out\n  const requestOptions = {\n    method: 'POST',\n    headers: authHeader()\n  };\n  return fetch('/api/1.0/logout', requestOptions).then(handleResponse);\n}\n\nfunction verify(email, code) {\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email,\n      code\n    })\n  };\n  return fetch('/api/1.0/users/verify', requestOptions).then(handleResponse);\n}\n\nfunction retrievePassword(email) {\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email\n    })\n  };\n  return fetch('/api/1.0/users/password', requestOptions).then(handleResponse);\n}\n\nfunction getAll() {\n  const requestOptions = {\n    method: 'GET',\n    headers: authHeader()\n  };\n  return fetch(`/users`, requestOptions).then(handleResponse);\n}\n\nfunction getById(id) {\n  const requestOptions = {\n    method: 'GET',\n    headers: authHeader()\n  };\n  return fetch(`/users/${id}`, requestOptions).then(handleResponse);\n}\n\nfunction register(user) {\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  };\n  return fetch(`/api/1.0/users`, requestOptions).then(handleResponse);\n}\n\nfunction update(user) {\n  const requestOptions = {\n    method: 'PUT',\n    headers: { ...authHeader(),\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  };\n  return fetch(`/users/${user.id}`, requestOptions).then(handleResponse);\n  ;\n} // prefixed function name with underscore because delete is a reserved word in javascript\n\n\nfunction _delete(id) {\n  const requestOptions = {\n    method: 'DELETE',\n    headers: authHeader()\n  };\n  return fetch(`/users/${id}`, requestOptions).then(handleResponse);\n}\n\nfunction handleResponse(response) {\n  return response.text().then(text => {\n    const data = text && JSON.parse(text);\n\n    if (!response.ok) {\n      const error = data && data.message || response.statusText;\n      return Promise.reject(error);\n    }\n\n    if (data.message === \"Logout success\") {\n      localStorage.removeItem('user');\n    }\n\n    return data;\n  });\n}","map":{"version":3,"sources":["/home/furkan/assessment-react/frontend_2/src/_services/user.service.js"],"names":["handleError","authHeader","userService","login","logout","register","verify","retrievePassword","getAll","getById","update","delete","_delete","username","password","requestOptions","method","headers","body","JSON","stringify","fetch","then","handleResponse","responseData","localStorage","setItem","user","email","code","id","response","text","data","parse","ok","error","message","statusText","Promise","reject","removeItem"],"mappings":"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","sourcesContent":["import { handleError } from 'vue';\nimport { authHeader } from '../_helpers';\n\nexport const userService = {\n    login,\n    logout,\n    register,\n    verify,\n    retrievePassword,\n    getAll,\n    getById,\n    update,\n    delete: _delete\n};\n\nfunction login(username, password) {\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username, password })\n    };\n\n    return fetch(`/api/1.0/auth`, requestOptions)\n        .then(handleResponse)\n        .then(responseData => {\n            // store user details and jwt token in local storage to keep user logged in between page refreshes\n            localStorage.setItem('user', JSON.stringify(responseData.user));\n\n            return responseData;\n        });\n}\n\nfunction logout() {\n    // remove user from local storage to log user out\n    const requestOptions = {\n        method: 'POST',\n        headers: authHeader()\n    };\n    return fetch('/api/1.0/logout', requestOptions).then(handleResponse);\n}\n\nfunction verify(email, code){\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, code })\n    };\n    return fetch('/api/1.0/users/verify', requestOptions).then(handleResponse);\n}\n\nfunction retrievePassword(email){\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email })\n    };\n    return fetch('/api/1.0/users/password', requestOptions).then(handleResponse);\n}\n\n\nfunction getAll() {\n    const requestOptions = {\n        method: 'GET',\n        headers: authHeader()\n    };\n\n    return fetch(`/users`, requestOptions).then(handleResponse);\n}\n\nfunction getById(id) {\n    const requestOptions = {\n        method: 'GET',\n        headers: authHeader()\n    };\n\n    return fetch(`/users/${id}`, requestOptions).then(handleResponse);\n}\n\nfunction register(user) {\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(user)\n    };\n\n    return fetch(`/api/1.0/users`, requestOptions).then(handleResponse);\n}\n\nfunction update(user) {\n    const requestOptions = {\n        method: 'PUT',\n        headers: { ...authHeader(), 'Content-Type': 'application/json' },\n        body: JSON.stringify(user)\n    };\n\n    return fetch(`/users/${user.id}`, requestOptions).then(handleResponse);;\n}\n\n// prefixed function name with underscore because delete is a reserved word in javascript\nfunction _delete(id) {\n    const requestOptions = {\n        method: 'DELETE',\n        headers: authHeader()\n    };\n\n    return fetch(`/users/${id}`, requestOptions).then(handleResponse);\n}\n\nfunction handleResponse(response) {\n    return response.text().then(text => {\n        const data = text && JSON.parse(text);\n        if (!response.ok) {\n            const error = (data && data.message) || response.statusText;\n            return Promise.reject(error);\n        }\n        if(data.message === \"Logout success\"){\n            localStorage.removeItem('user');\n        }\n        \n        return data;\n    });\n}"]},"metadata":{},"sourceType":"module"}