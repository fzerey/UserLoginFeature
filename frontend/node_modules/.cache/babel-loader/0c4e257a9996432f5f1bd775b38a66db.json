{"ast":null,"code":"import { handleError } from 'vue';\nimport { authHeader } from '../_helpers';\nexport const userService = {\n  login,\n  logout,\n  register,\n  verify,\n  retrievePassword,\n  getOnlineCount\n};\n\nfunction login(username, password) {\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      username,\n      password\n    })\n  };\n  return fetch(`/api/1.0/auth`, requestOptions).then(handleResponse).then(user => {\n    localStorage.setItem('user', JSON.stringify(user));\n    return user;\n  });\n}\n\nfunction logout() {\n  const requestOptions = {\n    method: 'POST',\n    headers: authHeader()\n  };\n  return fetch('/api/1.0/logout', requestOptions).then(handleResponse);\n}\n\nfunction verify(email, code) {\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email,\n      code\n    })\n  };\n  return fetch('/api/1.0/users/verify', requestOptions).then(handleResponse);\n}\n\nfunction retrievePassword(email) {\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email\n    })\n  };\n  return fetch('/api/1.0/users/password', requestOptions).then(handleResponse);\n}\n\nfunction getOnlineCount() {\n  const requestOptions = {\n    method: 'GET',\n    headers: authHeader()\n  };\n  return fetch(`/api/1.0/users/onlineCount`, requestOptions).then(handleResponse);\n}\n\nfunction register(user) {\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  };\n  return fetch(`/api/1.0/users`, requestOptions).then(handleResponse);\n}\n\nfunction handleResponse(response) {\n  return response.text().then(text => {\n    const data = text && JSON.parse(text);\n\n    if (!response.ok) {\n      const error = data && data.message || response.statusText;\n      return Promise.reject(error);\n    }\n\n    if (data.message === \"Logout success\") {\n      localStorage.removeItem('user');\n    }\n\n    return data;\n  });\n}","map":{"version":3,"sources":["/home/furkan/assessment-react/frontend_2/src/_services/user.service.js"],"names":["handleError","authHeader","userService","login","logout","register","verify","retrievePassword","getOnlineCount","username","password","requestOptions","method","headers","body","JSON","stringify","fetch","then","handleResponse","user","localStorage","setItem","email","code","response","text","data","parse","ok","error","message","statusText","Promise","reject","removeItem"],"mappings":"AAAA,SAASA,WAAT,QAA4B,KAA5B;AACA,SAASC,UAAT,QAA2B,aAA3B;AAEA,OAAO,MAAMC,WAAW,GAAG;AACvBC,EAAAA,KADuB;AAEvBC,EAAAA,MAFuB;AAGvBC,EAAAA,QAHuB;AAIvBC,EAAAA,MAJuB;AAKvBC,EAAAA,gBALuB;AAMvBC,EAAAA;AANuB,CAApB;;AASP,SAASL,KAAT,CAAeM,QAAf,EAAyBC,QAAzB,EAAmC;AAC/B,QAAMC,cAAc,GAAG;AACnBC,IAAAA,MAAM,EAAE,MADW;AAEnBC,IAAAA,OAAO,EAAE;AAAE,sBAAgB;AAAlB,KAFU;AAGnBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEP,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,KAAf;AAHa,GAAvB;AAMA,SAAOO,KAAK,CAAE,eAAF,EAAkBN,cAAlB,CAAL,CACFO,IADE,CACGC,cADH,EAEFD,IAFE,CAEGE,IAAI,IAAI;AACVC,IAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BP,IAAI,CAACC,SAAL,CAAeI,IAAf,CAA7B;AACA,WAAOA,IAAP;AACH,GALE,CAAP;AAMH;;AAED,SAAShB,MAAT,GAAkB;AACd,QAAMO,cAAc,GAAG;AACnBC,IAAAA,MAAM,EAAE,MADW;AAEnBC,IAAAA,OAAO,EAAEZ,UAAU;AAFA,GAAvB;AAIA,SAAOgB,KAAK,CAAC,iBAAD,EAAoBN,cAApB,CAAL,CAAyCO,IAAzC,CAA8CC,cAA9C,CAAP;AACH;;AAED,SAASb,MAAT,CAAgBiB,KAAhB,EAAuBC,IAAvB,EAA4B;AACxB,QAAMb,cAAc,GAAG;AACnBC,IAAAA,MAAM,EAAE,MADW;AAEnBC,IAAAA,OAAO,EAAE;AAAE,sBAAgB;AAAlB,KAFU;AAGnBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEO,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAAf;AAHa,GAAvB;AAKA,SAAOP,KAAK,CAAC,uBAAD,EAA0BN,cAA1B,CAAL,CAA+CO,IAA/C,CAAoDC,cAApD,CAAP;AACH;;AAED,SAASZ,gBAAT,CAA0BgB,KAA1B,EAAgC;AAC5B,QAAMZ,cAAc,GAAG;AACnBC,IAAAA,MAAM,EAAE,MADW;AAEnBC,IAAAA,OAAO,EAAE;AAAE,sBAAgB;AAAlB,KAFU;AAGnBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEO,MAAAA;AAAF,KAAf;AAHa,GAAvB;AAKA,SAAON,KAAK,CAAC,yBAAD,EAA4BN,cAA5B,CAAL,CAAiDO,IAAjD,CAAsDC,cAAtD,CAAP;AACH;;AAED,SAASX,cAAT,GAA0B;AACtB,QAAMG,cAAc,GAAG;AACnBC,IAAAA,MAAM,EAAE,KADW;AAEnBC,IAAAA,OAAO,EAAEZ,UAAU;AAFA,GAAvB;AAKA,SAAOgB,KAAK,CAAE,4BAAF,EAA+BN,cAA/B,CAAL,CAAoDO,IAApD,CAAyDC,cAAzD,CAAP;AACH;;AAGD,SAASd,QAAT,CAAkBe,IAAlB,EAAwB;AACpB,QAAMT,cAAc,GAAG;AACnBC,IAAAA,MAAM,EAAE,MADW;AAEnBC,IAAAA,OAAO,EAAE;AAAE,sBAAgB;AAAlB,KAFU;AAGnBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeI,IAAf;AAHa,GAAvB;AAMA,SAAOH,KAAK,CAAE,gBAAF,EAAmBN,cAAnB,CAAL,CAAwCO,IAAxC,CAA6CC,cAA7C,CAAP;AACH;;AAGD,SAASA,cAAT,CAAwBM,QAAxB,EAAkC;AAC9B,SAAOA,QAAQ,CAACC,IAAT,GAAgBR,IAAhB,CAAqBQ,IAAI,IAAI;AAChC,UAAMC,IAAI,GAAGD,IAAI,IAAIX,IAAI,CAACa,KAAL,CAAWF,IAAX,CAArB;;AACA,QAAI,CAACD,QAAQ,CAACI,EAAd,EAAkB;AACd,YAAMC,KAAK,GAAIH,IAAI,IAAIA,IAAI,CAACI,OAAd,IAA0BN,QAAQ,CAACO,UAAjD;AACA,aAAOC,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACH;;AACD,QAAGH,IAAI,CAACI,OAAL,KAAiB,gBAApB,EAAqC;AACjCV,MAAAA,YAAY,CAACc,UAAb,CAAwB,MAAxB;AACH;;AAED,WAAOR,IAAP;AACH,GAXM,CAAP;AAYH","sourcesContent":["import { handleError } from 'vue';\nimport { authHeader } from '../_helpers';\n\nexport const userService = {\n    login,\n    logout,\n    register,\n    verify,\n    retrievePassword,\n    getOnlineCount\n};\n\nfunction login(username, password) {\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username, password })\n    };\n\n    return fetch(`/api/1.0/auth`, requestOptions)\n        .then(handleResponse)\n        .then(user => {\n            localStorage.setItem('user', JSON.stringify(user));\n            return user;\n        });\n}\n\nfunction logout() {\n    const requestOptions = {\n        method: 'POST',\n        headers: authHeader()\n    };\n    return fetch('/api/1.0/logout', requestOptions).then(handleResponse);\n}\n\nfunction verify(email, code){\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, code })\n    };\n    return fetch('/api/1.0/users/verify', requestOptions).then(handleResponse);\n}\n\nfunction retrievePassword(email){\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email })\n    };\n    return fetch('/api/1.0/users/password', requestOptions).then(handleResponse);\n}\n\nfunction getOnlineCount() {\n    const requestOptions = {\n        method: 'GET',\n        headers: authHeader()\n    };\n\n    return fetch(`/api/1.0/users/onlineCount`, requestOptions).then(handleResponse);\n}\n\n\nfunction register(user) {\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(user)\n    };\n\n    return fetch(`/api/1.0/users`, requestOptions).then(handleResponse);\n}\n\n\nfunction handleResponse(response) {\n    return response.text().then(text => {\n        const data = text && JSON.parse(text);\n        if (!response.ok) {\n            const error = (data && data.message) || response.statusText;\n            return Promise.reject(error);\n        }\n        if(data.message === \"Logout success\"){\n            localStorage.removeItem('user');\n        }\n        \n        return data;\n    });\n}"]},"metadata":{},"sourceType":"module"}